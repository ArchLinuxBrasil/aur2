{% extends "base.html" %}
{% load i18n %}
{% block search %}{% endblock %}
{% block content %}
<div class="greybox">
    <h4 style="text-align: right">Search Criteria</h4>
    <hr />
    <form method="get" action="/search/">
        <table width="100%">
            <tr>
                {% for field in form %}
                <th style="text-align: left"><span class="smalltext">{{ field.label_tag }}</span></th>
                {% endfor %}
                <th>&nbsp;</th>
            </tr>
            <tr>
                {% for field in form %}
                <td>{{ field }}{% if field.help_text %}<br />{{ field.help_text }}{% endif %}</td>
                {% endfor %}
                <td><input type="submit" value="Search" /></td>
            </tr>
            {% if not form.is_valid %}
            <tr>
                {% for field in form %}
                <td class="error smalltext">{% if field.errors %}
                    {{ field.errors }}{% else %}&nbsp;
                {% endif %}</td>
                {% endfor %}
                <td>&nbsp;</td>
            </tr>
            {% endif %}
        </table>
    </form>
</div>
<br />

<div class="greybox">
    <table class="results" width="100%">
        <tr>
            <th>{% trans "Repository" %}</th>
            <th>{% trans "Name" %}</th>
            <th>{% trans "Description" %}</th>
            <th>{% trans "Category" %}</th>
            <th>{% trans "Maintainer" %}</th>
            <th>{% trans "Last Updated" %}</th>
        </tr>
        {% for package in packages %}
        <tr class="{% cycle 'pkgr1' 'pkgr2' %}">
            <td>{{ package.repository }}</td>
            <td><a href="/package/{{package.name}}/">{{ package.name }} {{ package.version }}-{{ package.release }}</a></td>
            <td>{{ package.description }}</td>
            <td>{{ package.category.name }}</td>
            <td>{{ package.maintainers.all|join:", " }}</td>
            <td>{{ package.updated }}</td>
        </tr>
        {% endfor %}
    </table>{% if pager.has_pagination %}
    <br />
    {% if pager.has_previous_page %}<span style="float: left"><a href="{{ pager.previous_link }}">&lt;&lt;&lt; Previous</a></span>{% endif %}
    {% if pager.has_next_page %}<span style="float: right"><a href="{{ pager.next_link }}">Next &gt;&gt;&gt;</a></span>{% endif %}
    <div style="text-align: center; width:75%; margin: auto;">
    {% for set in pager.windowed_page_links %}
        {% if not forloop.first %}...{% endif %}
        {% for page in set %}
            {% if page.2 %}{{ page.0 }}{% else %}<a href="{{ page.1 }}">{{ page.0 }}</a>{% endif %}
        {% endfor %}
    {% endfor %}
    </div>{%endif %}
</div>
{% endblock %}
