{% extends "base.html" %}
{% load i18n %}
{% block content %}
<div class="box">
    <h2 class="title">{{ pkg.name }} {{ pkg.version }}-{{ pkg.release }}</h2>
    <div style="float:right" class="listing">
        <ul class="small">
            <li><a href="#">{% trans "View $SCM Entries" %}</a></li>
            <li><a href="/package/{{ pkg.name }}/files/">View File List</a></li>
        </ul>
    </div>
    <table class="listing">
        <tr>
            <th>{% trans "Repository" %}:</th>
            <td>{{ pkg.repository.name }}</td>
        </tr><tr>
        <th>{% trans "Category" %}:</th>
            <td>{{ pkg.category.name }}</td>
        </tr><tr>
            <th>{% trans "Description" %}:</th>
            <td>{{ pkg.description }}</td>
        </tr><tr>
            <th>{% trans "Architecture" %}:</th>
            <td>{{ pkg.get_arch }}</td>
            </tr>{% if pkg.url %}<tr>
            <th>{% trans "URL" %}:</th>
            <td><a href="{{ pkg.url }}">{{ pkg.url }}</a></td>
            </tr>{% endif %}<tr>
            <th>{% trans "Maintainer" %}:</th>
            <td>{% for maintainer in pkg.maintainers.all %}{{ maintainer.username }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
        </tr><tr>
            <th>{% trans "Last Updated" %}:</th>
            <td>{{ pkg.updated|date:"Y-m-d H:i:s" }}</td>
        </tr>
    </table>
    <br />
    <table width="100%">
        <tr>
            <td valign="top">
                <div class="listing">
                    <h4>{% trans "Dependencies" %}:</h4>
                    <ul style="font-size:small;list-style:none">{% ifnotequal pkg.depends.all.count 0 %}{% for dep in pkg.depends.all %}
                        <li><a href="{% url django.views.generic.list_detail.object_detail object_id=dep.name %}">{{ dep.name }}</a></li>{% endfor %}
                    {% else %}
                        <li>None</li>
                    {% endifnotequal %}</ul>
                </div>
            </td><td colspan="2" valign="top">
                <div class="listing">
                    <h4>{% trans "Sources" %}:</h4>
                    <ul style="font-size:small;list-style:none">{% ifnotequal pkg.packagefile_set.all.count 0 %}{% for source in pkg.packagefile_set.all %}
                        <li>{{ source.filename|urlize }}</li>{% endfor %}
                    {% else %}
                        <li>None</li>
                    {% endifnotequal %}</ul>
                </div>
            </td>
        </tr>
    </table>
</div>
<br />
<h2 class="title">{% trans "Comments" %}</h2>
<div class="greybox">
    {% for comment in pkg.comment_set.all %}
    <span style="float:right; font-size:x-small">{{ comment.added|date }}
        {{ comment.added|time }}</span>
    <h4 class="news"><a href="#">{{ comment.user }}</a></h4>
    <p class="news">{{ comment.message }}</p>
    <br />
    <div style="text-align:right">
    <form action="{% url archlinux.aur.views.comment object_id=pkg.name %}" method="post">
            <input type="hidden" name="reply_to" value="{{ comment.id }}" />
            <input type="submit" value="{% trans "Reply" %}" />
        </form>
    </div>
    {% if not forloop.last %}<br />{% endif %}
    {% endfor %}
</div>
<br />
<h2 class="title">{% trans "Post comment" %}</h2>
<div class="greybox" style="text-align:right">
    <form action="{% url archlinux.aur.views.comment object_id=pkg.name %}" method="post">
        <textarea name="message" style="width:100%;" rows="10"></textarea><br />
        <input type="submit" value="{% trans "Reply" %}" />
    </form>
</div>
{% endblock %}

